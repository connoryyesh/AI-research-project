{"ast":null,"code":"// App.js\nimport React from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import{Amplify}from'aws-amplify';import'@aws-amplify/ui-react/styles.css';// Import AWS configuration\nimport awsConfig from'./aws-exports';// Import Auth Context\nimport{AuthProvider,useAuth}from'./contexts/AuthContext';// Import components for Admin & Researcher\nimport AdminLayout from'./pages/AdminLayout';import ResearcherLayout from'./pages/ResearcherLayout';import SurveyTakerLayout from'./pages/SurveyTakerLayout';import Dashboard from'./pages/Dashboard';// Removed: ManageResearchers and SurveyBuilder imports.\n// Remaining shared component:\nimport GroupSettings from'./pages/GroupSettings';import Logout from'./pages/Logout';import Login from'./pages/Login';import UserRoleManagement from'./pages/UserRoleManagement';// New survey taker pages for pre-survey, simulated AI, and post survey.\nimport PreSurveyPage from'./pages/PreSurveyPage';import SimulatedAIPage from'./pages/SimulatedAIPage';import PostSurveyPage from'./pages/PostSurveyPage';// Initialize Amplify with the imported configuration\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";Amplify.configure(awsConfig);// Protected route component\nconst ProtectedRoute=_ref=>{let{children,requiredRole}=_ref;const{isAuthenticated,isLoading,user}=useAuth();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}// If a specific role is required, check it\nif(requiredRole&&user.role!==requiredRole){// Redirect to their appropriate home based on role\nif(user.role==='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true});}else if(user.role==='researcher'){return/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true});}}return children;};// Main app routes\nconst AppRoutes=()=>{const{user,isAuthenticated,isLoading}=useAuth();// Prevent any routing until auth state is determined\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading authentication state...\"});}return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{}):user.role==='admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true}):user.role==='researcher'?/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true})}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"admin\",children:/*#__PURE__*/_jsx(AdminLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-settings\",element:/*#__PURE__*/_jsx(GroupSettings,{})}),/*#__PURE__*/_jsx(Route,{path:\"manage-roles\",element:/*#__PURE__*/_jsx(UserRoleManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/researcher\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"researcher\",children:/*#__PURE__*/_jsx(ResearcherLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-settings\",element:/*#__PURE__*/_jsx(GroupSettings,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/survey\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"survey-taker\",children:/*#__PURE__*/_jsx(SurveyTakerLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(PreSurveyPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"simulatedAI\",element:/*#__PURE__*/_jsx(SimulatedAIPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"postSurvey\",element:/*#__PURE__*/_jsx(PostSurveyPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]});};// Root app component with authentication guard\nfunction App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppRoutes,{})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Route","Routes","Navigate","Amplify","awsConfig","AuthProvider","useAuth","AdminLayout","ResearcherLayout","SurveyTakerLayout","Dashboard","GroupSettings","Logout","Login","UserRoleManagement","PreSurveyPage","SimulatedAIPage","PostSurveyPage","jsx","_jsx","jsxs","_jsxs","configure","ProtectedRoute","_ref","children","requiredRole","isAuthenticated","isLoading","user","to","replace","role","AppRoutes","path","element","index","App"],"sources":["/Users/varv/Downloads/CONNORR1/src/App.js"],"sourcesContent":["// App.js\nimport React from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Routes,\n  Navigate\n} from 'react-router-dom';\nimport { Amplify } from 'aws-amplify';\nimport '@aws-amplify/ui-react/styles.css';\n\n// Import AWS configuration\nimport awsConfig from './aws-exports';\n\n// Import Auth Context\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\n\n// Import components for Admin & Researcher\nimport AdminLayout from './pages/AdminLayout';\nimport ResearcherLayout from './pages/ResearcherLayout';\nimport SurveyTakerLayout from './pages/SurveyTakerLayout';\nimport Dashboard from './pages/Dashboard';\n// Removed: ManageResearchers and SurveyBuilder imports.\n// Remaining shared component:\nimport GroupSettings from './pages/GroupSettings';\nimport Logout from './pages/Logout';\nimport Login from './pages/Login';\nimport UserRoleManagement from './pages/UserRoleManagement';\n\n// New survey taker pages for pre-survey, simulated AI, and post survey.\nimport PreSurveyPage from './pages/PreSurveyPage';\nimport SimulatedAIPage from './pages/SimulatedAIPage';\nimport PostSurveyPage from './pages/PostSurveyPage';\n\n// Initialize Amplify with the imported configuration\nAmplify.configure(awsConfig);\n\n// Protected route component\nconst ProtectedRoute = ({ children, requiredRole }) => {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  \n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!isAuthenticated) {\n    return <Navigate to=\"/\" replace />;\n  }\n  \n  // If a specific role is required, check it\n  if (requiredRole && user.role !== requiredRole) {\n    // Redirect to their appropriate home based on role\n    if (user.role === 'admin') {\n      return <Navigate to=\"/admin/dashboard\" replace />;\n    } else if (user.role === 'researcher') {\n      return <Navigate to=\"/researcher/dashboard\" replace />;\n    } else {\n      return <Navigate to=\"/survey\" replace />;\n    }\n  }\n  \n  return children;\n};\n\n// Main app routes\nconst AppRoutes = () => {\n  const { user, isAuthenticated, isLoading } = useAuth();\n  \n  // Prevent any routing until auth state is determined\n  if (isLoading) {\n    return <div>Loading authentication state...</div>;\n  }\n  \n  return (\n    <Routes>\n      {/* Public login route */}\n      <Route path=\"/\" element={!isAuthenticated ? <Login /> : (\n        user.role === 'admin' ? <Navigate to=\"/admin/dashboard\" replace /> :\n        user.role === 'researcher' ? <Navigate to=\"/researcher/dashboard\" replace /> :\n        <Navigate to=\"/survey\" replace />\n      )} />\n\n      {/* Admin routes */}\n      <Route path=\"/admin\" element={\n        <ProtectedRoute requiredRole=\"admin\">\n          <AdminLayout />\n        </ProtectedRoute>\n      }>\n        <Route path=\"dashboard\" element={<Dashboard />} />\n        {/* Removed: manage-researchers & survey-builder routes */}\n        <Route path=\"group-settings\" element={<GroupSettings />} />\n        {/* New route for role management */}\n        <Route path=\"manage-roles\" element={<UserRoleManagement />} />\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/admin/dashboard\" replace />} />\n      </Route>\n\n      {/* Researcher routes */}\n      <Route path=\"/researcher\" element={\n        <ProtectedRoute requiredRole=\"researcher\">\n          <ResearcherLayout />\n        </ProtectedRoute>\n      }>\n        <Route path=\"dashboard\" element={<Dashboard />} />\n        <Route path=\"group-settings\" element={<GroupSettings />} />\n        {/* Removed: survey-builder route */}\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/researcher/dashboard\" replace />} />\n      </Route>\n\n      {/* Survey taker routes */}\n      <Route path=\"/survey\" element={\n        <ProtectedRoute requiredRole=\"survey-taker\">\n          <SurveyTakerLayout />\n        </ProtectedRoute>\n      }>\n        {/* Default survey taker page is now the pre-survey consent */}\n        <Route index element={<PreSurveyPage />} />\n        <Route path=\"simulatedAI\" element={<SimulatedAIPage />} />\n        <Route path=\"postSurvey\" element={<PostSurveyPage />} />\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/survey\" replace />} />\n      </Route>\n\n      {/* Fallback route */}\n      <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n    </Routes>\n  );\n};\n\n// Root app component with authentication guard\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <AppRoutes />\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}