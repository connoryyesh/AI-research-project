{"ast":null,"code":"// App.js\nimport React from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import{Amplify}from'aws-amplify';import'@aws-amplify/ui-react/styles.css';// Import AWS configuration\nimport awsConfig from'./aws-exports';// Import Auth Context\nimport{AuthProvider,useAuth}from'./contexts/AuthContext';// Import components for Admin, Researcher, and SurveyTaker\nimport AdminLayout from'./pages/AdminLayout';import ResearcherLayout from'./pages/ResearcherLayout';import SurveyTakerLayout from'./pages/SurveyTakerLayout';import Dashboard from'./pages/Dashboard';import GroupSettings from'./pages/GroupSettings';import Logout from'./pages/Logout';import Login from'./pages/Login';import UserRoleManagement from'./pages/UserRoleManagement';import SimulatedAIPage from'./pages/SimulatedAIPage';// Initialize Amplify with the imported configuration\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";Amplify.configure(awsConfig);// Protected route component ensures that protected routes are only accessible after authentication.\nconst ProtectedRoute=_ref=>{let{children,requiredRole}=_ref;const{isAuthenticated,isLoading,user}=useAuth();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!isAuthenticated){// Redirect to the /login route if not authenticated.\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// If a specific role is required, check it; otherwise, allow the authenticated user.\nif(requiredRole&&user.role!==requiredRole){if(user.role==='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true});}else if(user.role==='researcher'){return/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true});}}return children;};const AppRoutes=()=>{const{user,isAuthenticated,isLoading}=useAuth();// Prevent any routing until the authentication state has been determined.\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading authentication state...\"});}return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{}):// If already authenticated, automatically redirect based on the user’s role.\nuser.role==='admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true}):user.role==='researcher'?/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"admin\",children:/*#__PURE__*/_jsx(AdminLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-settings\",element:/*#__PURE__*/_jsx(GroupSettings,{})}),/*#__PURE__*/_jsx(Route,{path:\"manage-roles\",element:/*#__PURE__*/_jsx(UserRoleManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/researcher\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"researcher\",children:/*#__PURE__*/_jsx(ResearcherLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-settings\",element:/*#__PURE__*/_jsx(GroupSettings,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/researcher/dashboard\",replace:true})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/survey\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requiredRole:\"survey-taker\",children:/*#__PURE__*/_jsx(SurveyTakerLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(SimulatedAIPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"simulatedAI\",element:/*#__PURE__*/_jsx(SimulatedAIPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/survey\",replace:true})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]});};// Root app component with authentication context wrapper.\nfunction App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppRoutes,{})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Route","Routes","Navigate","Amplify","awsConfig","AuthProvider","useAuth","AdminLayout","ResearcherLayout","SurveyTakerLayout","Dashboard","GroupSettings","Logout","Login","UserRoleManagement","SimulatedAIPage","jsx","_jsx","jsxs","_jsxs","configure","ProtectedRoute","_ref","children","requiredRole","isAuthenticated","isLoading","user","to","replace","role","AppRoutes","path","element","index","App"],"sources":["/Users/varv/Downloads/CONNORR1/src/App.js"],"sourcesContent":["// App.js\nimport React from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Routes,\n  Navigate\n} from 'react-router-dom';\nimport { Amplify } from 'aws-amplify';\nimport '@aws-amplify/ui-react/styles.css';\n\n// Import AWS configuration\nimport awsConfig from './aws-exports';\n\n// Import Auth Context\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\n\n// Import components for Admin, Researcher, and SurveyTaker\nimport AdminLayout from './pages/AdminLayout';\nimport ResearcherLayout from './pages/ResearcherLayout';\nimport SurveyTakerLayout from './pages/SurveyTakerLayout';\nimport Dashboard from './pages/Dashboard';\nimport GroupSettings from './pages/GroupSettings';\nimport Logout from './pages/Logout';\nimport Login from './pages/Login';\nimport UserRoleManagement from './pages/UserRoleManagement';\nimport SimulatedAIPage from './pages/SimulatedAIPage';\n\n// Initialize Amplify with the imported configuration\nAmplify.configure(awsConfig);\n\n// Protected route component ensures that protected routes are only accessible after authentication.\nconst ProtectedRoute = ({ children, requiredRole }) => {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  \n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!isAuthenticated) {\n    // Redirect to the /login route if not authenticated.\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  // If a specific role is required, check it; otherwise, allow the authenticated user.\n  if (requiredRole && user.role !== requiredRole) {\n    if (user.role === 'admin') {\n      return <Navigate to=\"/admin/dashboard\" replace />;\n    } else if (user.role === 'researcher') {\n      return <Navigate to=\"/researcher/dashboard\" replace />;\n    } else {\n      return <Navigate to=\"/survey\" replace />;\n    }\n  }\n  \n  return children;\n};\n\nconst AppRoutes = () => {\n  const { user, isAuthenticated, isLoading } = useAuth();\n  \n  // Prevent any routing until the authentication state has been determined.\n  if (isLoading) {\n    return <div>Loading authentication state...</div>;\n  }\n  \n  return (\n    <Routes>\n      {/* LOGIN ROUTE */}\n      <Route\n        path=\"/login\"\n        element={\n          !isAuthenticated ? (\n            <Login />\n          ) : (\n            // If already authenticated, automatically redirect based on the user’s role.\n            user.role === 'admin' ? (\n              <Navigate to=\"/admin/dashboard\" replace />\n            ) : user.role === 'researcher' ? (\n              <Navigate to=\"/researcher/dashboard\" replace />\n            ) : (\n              <Navigate to=\"/survey\" replace />\n            )\n          )\n        }\n      />\n\n      {/* Redirect the root \"/\" to the login page */}\n      <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n\n      {/* ADMIN ROUTES */}\n      <Route\n        path=\"/admin\"\n        element={\n          <ProtectedRoute requiredRole=\"admin\">\n            <AdminLayout />\n          </ProtectedRoute>\n        }\n      >\n        <Route path=\"dashboard\" element={<Dashboard />} />\n        <Route path=\"group-settings\" element={<GroupSettings />} />\n        <Route path=\"manage-roles\" element={<UserRoleManagement />} />\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/admin/dashboard\" replace />} />\n      </Route>\n\n      {/* RESEARCHER ROUTES */}\n      <Route\n        path=\"/researcher\"\n        element={\n          <ProtectedRoute requiredRole=\"researcher\">\n            <ResearcherLayout />\n          </ProtectedRoute>\n        }\n      >\n        <Route path=\"dashboard\" element={<Dashboard />} />\n        <Route path=\"group-settings\" element={<GroupSettings />} />\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/researcher/dashboard\" replace />} />\n      </Route>\n\n      {/* SURVEY-TAKER ROUTES */}\n      <Route\n        path=\"/survey\"\n        element={\n          <ProtectedRoute requiredRole=\"survey-taker\">\n            <SurveyTakerLayout />\n          </ProtectedRoute>\n        }\n      >\n        {/* The default route and the explicit simulatedAI route both point to SimulatedAIPage */}\n        <Route index element={<SimulatedAIPage />} />\n        <Route path=\"simulatedAI\" element={<SimulatedAIPage />} />\n        <Route path=\"logout\" element={<Logout />} />\n        <Route path=\"*\" element={<Navigate to=\"/survey\" replace />} />\n      </Route>\n\n      {/* Fallback Route: Redirect any unknown paths to the login page */}\n      <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n    </Routes>\n  );\n};\n\n// Root app component with authentication context wrapper.\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <AppRoutes />\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}